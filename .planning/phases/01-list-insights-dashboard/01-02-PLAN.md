---
phase: 01-list-insights-dashboard
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - frontend/src/components/insights/layout/BentoGrid.tsx
  - frontend/src/components/insights/cards/BaseInsightCard.tsx
  - frontend/src/components/insights/cards/HeroStatCard.tsx
  - frontend/src/components/insights/cards/GenreDonutCard.tsx
  - frontend/src/components/insights/cards/TopGenresCard.tsx
  - frontend/src/components/insights/cards/RatingComparisonCard.tsx
  - frontend/src/components/insights/cards/TopPeopleCard.tsx
  - frontend/src/components/insights/cards/ActiveMonthCard.tsx
  - frontend/src/components/insights/cards/ReleaseYearCard.tsx
  - frontend/src/components/insights/states/InsightsEmptyState.tsx
  - frontend/src/components/insights/states/InsightsSkeleton.tsx
autonomous: true
requirements: []

must_haves:
  truths:
    - "Bento grid lays out insight cards in a responsive CSS Grid — 6 cols on desktop, 4 on tablet, 1 on mobile"
    - "Hero stat card displays total watched count as large bold number with CountUp animation"
    - "Genre donut card renders donut chart with genre distribution data"
    - "Top genres card shows ranked top 5 genres with percentage bars"
    - "Rating comparison card shows user average vs TMDB average side by side"
    - "Top people card displays top 5 actors/directors as profile cards with TMDB photo, name, and count"
    - "Active month card shows the most active month with count"
    - "Release year card renders bar chart with decade distribution"
    - "All cards use glassmorphism styling (backdrop-blur-md, semi-transparent bg, subtle border)"
    - "Cards animate in with staggered fade-in/slide-up on mount"
    - "Empty state shows encouraging message with CTA to browse media"
  artifacts:
    - path: "frontend/src/components/insights/layout/BentoGrid.tsx"
      provides: "Responsive CSS Grid container with Framer Motion stagger animation"
      exports: ["default"]
    - path: "frontend/src/components/insights/cards/BaseInsightCard.tsx"
      provides: "Shared glassmorphism card wrapper"
      exports: ["default"]
    - path: "frontend/src/components/insights/cards/HeroStatCard.tsx"
      provides: "Total watched count hero card"
      exports: ["default"]
    - path: "frontend/src/components/insights/cards/GenreDonutCard.tsx"
      provides: "Genre distribution donut chart card"
      exports: ["default"]
    - path: "frontend/src/components/insights/cards/TopPeopleCard.tsx"
      provides: "Top actors/directors profile cards"
      exports: ["default"]
    - path: "frontend/src/components/insights/states/InsightsEmptyState.tsx"
      provides: "Empty state with CTA"
      exports: ["default"]
  key_links:
    - from: "frontend/src/components/insights/layout/BentoGrid.tsx"
      to: "framer-motion"
      via: "motion.div with staggerChildren variants"
      pattern: "import.*motion.*from.*framer-motion"
    - from: "frontend/src/components/insights/cards/HeroStatCard.tsx"
      to: "react-countup"
      via: "CountUp component for animated number"
      pattern: "import.*CountUp.*from.*react-countup"
    - from: "frontend/src/components/insights/cards/GenreDonutCard.tsx"
      to: "frontend/src/components/insights/charts/DonutChart.tsx"
      via: "renders DonutChart with genre distribution data"
      pattern: "import.*DonutChart"
---

<objective>
Build all visual components for the insights dashboard — the bento grid layout, glassmorphism card wrappers, all 7 metric cards, and empty/loading states.

Purpose: Create the complete UI component library for the insights dashboard. Each card receives pre-computed data as props and renders the appropriate visualization. The bento grid orchestrates layout and entrance animations.

Output: BentoGrid layout, BaseInsightCard wrapper, 7 metric cards, empty state, loading skeleton — all styled to Cinelas blizzard theme with glassmorphism.
</objective>

<execution_context>
@/home/gustaffaivre/.claude/get-shit-done/workflows/execute-plan.md
@/home/gustaffaivre/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-list-insights-dashboard/01-01-SUMMARY.md
@frontend/src/types/insights.ts
@frontend/src/lib/insights/aggregators.ts
@frontend/src/components/insights/charts/DonutChart.tsx
@frontend/src/components/insights/charts/BarChart.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BentoGrid layout, BaseInsightCard, and empty/loading states</name>
  <files>
    frontend/src/components/insights/layout/BentoGrid.tsx
    frontend/src/components/insights/cards/BaseInsightCard.tsx
    frontend/src/components/insights/states/InsightsEmptyState.tsx
    frontend/src/components/insights/states/InsightsSkeleton.tsx
  </files>
  <action>
1. Install framer-motion: `cd frontend && npm install framer-motion`

2. Create `BentoGrid.tsx`:
   - Import `motion` from framer-motion, `React` from react
   - Container variants: hidden={opacity:0}, visible={opacity:1, transition:{staggerChildren:0.08, delayChildren:0.15}}
   - Card variants: hidden={opacity:0, y:20}, visible={opacity:1, y:0, transition:{duration:0.4, ease:'easeOut'}}
   - Render `motion.div` with container variants, initial="hidden", animate="visible"
   - CSS Grid classes: `grid gap-4 grid-cols-1 md:grid-cols-4 lg:grid-cols-6`
   - Map over children with React.Children.map, wrap each in `motion.div` with card variants
   - Accept `className` prop for additional styling

3. Create `BaseInsightCard.tsx`:
   - Glassmorphism wrapper component per user decision
   - Props: `children`, `className?`, `title?` (card header label), `span?` for grid column/row span classes
   - Tailwind classes: `bg-component-primary/60 backdrop-blur-md border border-border/40 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-shadow duration-300`
   - If `title` provided, render as `<h3 className="text-sm font-medium text-subtle uppercase tracking-wider mb-3">{title}</h3>`
   - Apply `span` className to outer div for grid sizing (e.g., "md:col-span-2 md:row-span-2")

4. Create `InsightsEmptyState.tsx`:
   - Props: `onBrowse: () => void` (navigates to home/discover)
   - Import TrendingUp, Plus from lucide-react
   - Centered layout with icon in circular accent bg, heading "Your insights are waiting", description "Add at least 3 movies or TV shows to unlock personalized insights about your watching habits, favorite genres, and more.", CTA button "Browse & Add Media"
   - CTA uses accent-primary bg with hover state
   - Per user decision: encouraging message with CTA to browse/add

5. Create `InsightsSkeleton.tsx`:
   - Mimics bento grid layout with animated pulse placeholders
   - Use same grid classes as BentoGrid (grid-cols-1 md:grid-cols-4 lg:grid-cols-6)
   - Hero card skeleton: large block (col-span-2 row-span-2), smaller blocks for other cards
   - Use `animate-pulse bg-component-primary/40 rounded-2xl` for each skeleton card
   - 7 skeleton blocks matching the 7 insight cards with approximate sizing
  </action>
  <verify>
    Run `cd frontend && npx tsc --noEmit` — no type errors. Verify framer-motion in package.json.
  </verify>
  <done>
    BentoGrid renders responsive CSS Grid with stagger animation. BaseInsightCard provides glassmorphism wrapper with optional title and span. Empty state shows encouraging CTA. Skeleton matches bento layout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create all 7 insight metric card components</name>
  <files>
    frontend/src/components/insights/cards/HeroStatCard.tsx
    frontend/src/components/insights/cards/GenreDonutCard.tsx
    frontend/src/components/insights/cards/TopGenresCard.tsx
    frontend/src/components/insights/cards/RatingComparisonCard.tsx
    frontend/src/components/insights/cards/TopPeopleCard.tsx
    frontend/src/components/insights/cards/ActiveMonthCard.tsx
    frontend/src/components/insights/cards/ReleaseYearCard.tsx
  </files>
  <action>
1. `HeroStatCard.tsx` — Hero card (largest, most prominent per user decision):
   - Props: `totalCount: number`
   - Wrap in BaseInsightCard with span="md:col-span-2 md:row-span-2"
   - Import CountUp from react-countup for animated number reveal
   - Large bold display number: `text-6xl md:text-7xl font-extrabold text-text-h1` with CountUp
   - Subtitle: "Movies & Shows" in text-subtle
   - Small icon from lucide-react (Film or Tv)

2. `GenreDonutCard.tsx` — Genre distribution donut:
   - Props: `data: GenreDistribution[]` (from insights types)
   - Wrap in BaseInsightCard with title="Genre Distribution", span="md:col-span-2 md:row-span-2"
   - Import and render DonutChart component from ../charts/DonutChart
   - Pass transformed data (name + value) to DonutChart
   - If data empty, show "No genre data available" message

3. `TopGenresCard.tsx` — Top 5 ranked genres:
   - Props: `genres: GenreDistribution[]` (already sliced to top 5)
   - Wrap in BaseInsightCard with title="Top Genres", span="md:col-span-2"
   - Render ordered list with rank number, genre name, count, and percentage bar
   - Percentage bar: thin horizontal bar with accent-primary bg, width based on percentage relative to #1 genre
   - Font styling: genre name in font-medium text-text-h1, count in text-subtle

4. `RatingComparisonCard.tsx` — User avg vs TMDB avg:
   - Props: `data: RatingComparison` (from insights types)
   - Wrap in BaseInsightCard with title="Your Taste vs TMDB", span="md:col-span-2"
   - Display two large numbers side by side: user avg and TMDB avg
   - Use formatRating from formatters
   - Show difference with color indicator: green if user rates higher, red if lower, neutral if similar (within 0.3)
   - Labels: "Your Average" and "TMDB Average"
   - Small note: "Based on {itemCount} rated titles"

5. `TopPeopleCard.tsx` — Top actors/directors as profile cards (leaderboard style per user decision):
   - Props: `actors: TopPerson[]`, `directors: TopPerson[]`
   - Wrap in BaseInsightCard with title="Top Actors & Directors", span="md:col-span-2 md:row-span-2"
   - Two sections with subtle divider: "Actors" and "Directors"
   - Each person: circular profile image (TMDB image URL `https://image.tmdb.org/t/p/w185{profilePath}`), name, count badge
   - Fallback for missing profile image: initials in colored circle or generic user icon from lucide-react
   - Layout: horizontal row of profile avatars with names below, or vertical list with avatar + name + count

6. `ActiveMonthCard.tsx` — Most active month:
   - Props: `data: ActiveMonth | null`
   - Wrap in BaseInsightCard with title="Most Active Month", span="md:col-span-2"
   - Display month name in large bold text (displayName from ActiveMonth)
   - Count: "{count} titles added" in text-subtle
   - Calendar icon from lucide-react
   - If null, show "Not enough data yet"

7. `ReleaseYearCard.tsx` — Release year/decade bar chart (bar chart per Claude's discretion):
   - Props: `data: ReleaseYearBreakdown[]`
   - Wrap in BaseInsightCard with title="Release Decades", span="md:col-span-2 lg:col-span-3"
   - Import and render BarChart from ../charts/BarChart
   - Group data by decade, transform to `{ label: "2020s", value: count }` format
   - If data empty, show "No release data available"

All cards should:
- Use BaseInsightCard as wrapper for consistent glassmorphism
- Accept data as props (no data fetching inside cards)
- Handle null/empty data gracefully with fallback messages
- Use Tailwind classes consistent with blizzard theme (text-text-h1, text-subtle, bg-accent-primary, etc.)
  </action>
  <verify>
    Run `cd frontend && npx tsc --noEmit` — no type errors across all 7 card components.
  </verify>
  <done>
    All 7 insight cards render their respective metrics: HeroStatCard with CountUp animation, GenreDonutCard with DonutChart, TopGenresCard with ranked bars, RatingComparisonCard with side-by-side comparison, TopPeopleCard with profile avatars, ActiveMonthCard with bold month display, ReleaseYearCard with BarChart. All use glassmorphism via BaseInsightCard. All handle empty data.
  </done>
</task>

</tasks>

<verification>
- `cd frontend && npx tsc --noEmit` passes with zero errors
- framer-motion appears in frontend/package.json dependencies
- All 7 card components export default and accept typed props
- BentoGrid wraps children with stagger animation
- BaseInsightCard provides glassmorphism styling
- Empty state renders with CTA button
- Skeleton matches bento grid layout
</verification>

<success_criteria>
- 7 insight card components rendering all required metrics (total count, genre donut, top genres, rating comparison, top people, active month, release year)
- BentoGrid with responsive layout (6/4/1 columns) and stagger animation
- Glassmorphism on all cards (backdrop-blur-md, semi-transparent bg)
- Empty state with encouraging message and browse CTA
- Loading skeleton matching bento layout
- Zero TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-list-insights-dashboard/01-02-SUMMARY.md`
</output>
